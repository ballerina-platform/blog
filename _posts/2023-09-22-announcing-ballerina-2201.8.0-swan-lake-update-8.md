---
layout: blog-post
title: Announcing Ballerina Swan Lake Update 8 (2201.8.0)
author: Ballerina Team
published-date: 22 September 2023
status: Published
socialmediaimage: Ballerina-Swan-Lake-GA-Release-banner-02-with-button.png
permalink: /posts/2023-09-22-announcing-ballerina-2201.8.0-swan-lake-update-8/
---

<style>.cBlogContent p{white-space: break-spaces !important;}</style>

We are excited to announce the [Ballerina Swan Lake Update 8 (2201.8.0)](https://ballerina.io/downloads/) release, which adds many new features and improvements to the language, library, runtime, and tooling of Ballerina as described below.

## Java 17 support

The Java 11 Long term Support (LTS) active support will end in September 2023. Therefore, the jBallerina runtime is now upgraded to support <a href="https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html" target="_blank">Java 17 LTS</a>, which is the latest long-term support release of the Java SE platform.

Users will not have an impact on the Java version upgrade except for the following.

- If you are specifically using Java 11 to run Ballerina programs, you would have to switch to Java 17.

- The Ballerina interoperability implementation will have an impact on Java 17 support due to any incompatible changes. As an example, Java 17 will have some restrictions on using Java reflections with internal Java packages.

- Ballerina Update 8 Docker images will run on Java17 JRE.

For more information, see the <a href="https://www.oracle.com/java/technologies/javase/17-relnote-issues.html" target="_blank">Java 17 release notes</a>.

## Custom package repositories support 

With Swan Lake Update 8 release, now, you can seamlessly integrate Maven repositories into the package build. This feature empowers you to publish and retrieve packages from multiple Maven repositories in addition to the Ballerina Central repository.

The steps below show an example of how you can publish a package to Github packages and retrieve it.

1. Configure the repository in the `<USER_HOME>/.ballerina/Settings.toml` file.

    ```toml
    [[repository.maven]]
    id = "myGitRepo" # This id is used when pushing/ pulling balas
    url = "https://maven.pkg.github.com/azinneera/ballerina-release"
    username = "<github_username>"
    accesstoken = "<github_accesstoken>"
    ```

2. Execute the command below to publish the package.

    ```
    bal push --repository myGitRepo
    ```

3. Specify the dependency in the `Ballerina.toml` file to retrieve the package.

    ```toml
    [[dependency]]
    org = “john”
    name = “email”
    version = “0.1.0”
    repository = “myGitRepo”
    ```

For more information on the custom package repositories support, see <a href="https://ballerina.io/learn/manage-dependencies/#use-custom-repositories-for-package-management" target="_blank">Use custom repositories for package management</a>.

## The `bal tool` and `bal profile` commands

This release introduces two new commands to the collection of Ballerina CLI commands.

### The `bal tool` command

Ballerina Swan Lake distribution includes a set of bundled CLI commands for efficiently managing Ballerina source code. Additionally, Ballerina offers a collection of tools, which are CLI command implementations not bundled with the distribution but can be easily obtained from Ballerina Central and seamlessly managed using the `bal tool` command. 

The `bal tool` command allows users to pull, remove, update, search tools, and switch between tool versions. Once pulled, these tools will behave as first-class commands.

For example, execute the command below to pull and install the <a href="https://ballerina.io/learn/health-tool/" target="_blank">Health tool</a>.

```
bal tool pull health
```

For more information, see <a href="https://ballerina.io/learn/cli-commands/#tool-commands" target="_blank">Tool commands</a>.

### The `bal profile` command

The `bal profile` command runs a Ballerina package, profiles it, and generates a flame graph, which shows the function call stack and the execution times of each function call. It provides the ability to find the performance bottlenecks of a Ballerina application. 

An example flame graph generated by the Ballerina Profiler is shown below.

<img src="ballerina-service-profiler-output.png" alt="Profiler Output">

For more information, see <a href="https://ballerina.io/learn/ballerina-profiler" target="_blank">Ballerina Profiler</a>.

## The `mqtt` and `java.jms` packages

This release brings two new additions to the Ballerina Library to improve the provision of messaging-related functionalities.

### The `mqtt` package

MQTT is a lightweight, publish-subscribe messaging protocol that is ideal for connecting remote devices with a small code footprint and minimal network bandwidth. It is an open standard protocol that is supported by a wide variety of devices and platforms. Ballerina MQTT supports MQTTv5 with request/response, will message, and many more features. 

Below is an example usage of the `mqtt` package.

```ballerina
import ballerina/mqtt;

mqtt:ClientConfiguration clientConfiguration = {
    connectionConfig: {
        username: "ballerina",
        password: "ballerinamqtt"
    }
};

mqtt:Client mqttClient = check new (mqtt:DEFAULT_URL, "publisher-client-1", clientConfiguration);
check mqttClient->publish("mqtt/test", {payload: "This is Ballerina MQTT client!!!".toBytes()});
```

For more information, see <a href="https://central.ballerina.io/ballerina/mqtt" target="_blank">`ballerina/mqtt`</a>.

### The `java.jms` package

Java Message Service (JMS) is a Java-based API that provides a standardized way for applications to create, send, receive, and consume messages in a loosely coupled, reliable, and asynchronous manner. JMS is part of the Java EE (Enterprise Edition) specification and is commonly used for building distributed, decoupled, and scalable applications that need to exchange information or events between different components. 

Below is an example usage of the `java.jms` package.

```ballerina
import ballerina/log;
import ballerinax/java.jms;
import ballerinax/activemq.driver as _;

jms:Connection connection = check new (
    initialContextFactory = "org.apache.activemq.jndi.ActiveMQInitialContextFactory",
    providerUrl = "tcp://localhost:61616"
);
jms:Session session = checkconnection->createSession();

// sending messages using JMS message producer
jms:MessageProducer producer = check session.createProducer({
    'type: jms:QUEUE,
    name: "MyQueue"
});
jms:TextMessage msg = {
    content: "Hello Ballerina!"
};

check producer->send(msg);

    // consuming messages using JMS message consumer
    jms:MessageConsumer consumer = check session.createConsumer(
    destination = {
        'type: jms:QUEUE,
        name: "MyQueue"
    }
);
while true {
        jms: Message
        ? response = checkconsumer->receive(3000);
if response is jms:TextMessage     {
        log:printInfo         ("Message received: "         , content =response.toString());
    }
}
```

For more information, see <a href="https://central.ballerina.io/ballerinax/java.jms" target="_blank">`ballerinax/java.jms`</a>.

## The `graphql.dataloader` submodule

The Ballerina GraphQL module provides the capability to batch and cache data fetched from data sources using the `graphql.dataloader` submodule. This DataLoader feature helps to effectively solve the N+1 problem that commonly occurs in GraphQL services.

For an example of the usage of the `graphql.dataloader` submodule, see the <a href="https://ballerina.io/downloads/swan-lake-release-notes/swan-lake-2201.8.0#graphql-package" target="_blank">release note</a>.

To learn more about the DataLoader feature, see the <a href="https://ballerina.io/spec/graphql/#106-dataloader" target="_blank">DataLoader specification</a>.

Furthermore, this release brings a range of notable additions and improvements to the language, runtime, standard library, and developer tools. For a comprehensive overview of all the new features and improvements brought by Swan Lake Update 8, see the <a href="https://ballerina.io/downloads/swan-lake-release-notes/swan-lake-2201.8.0" target="_blank">release note</a>.

We encourage our community to explore these features and provide feedback. Your input is invaluable in shaping the future of Ballerina and ensuring it meets your needs.

Cheers to the Ballerina community and the bright future of it!
