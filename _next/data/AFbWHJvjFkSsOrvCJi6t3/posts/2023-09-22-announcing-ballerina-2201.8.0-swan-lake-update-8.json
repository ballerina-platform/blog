{"pageProps":{"frontmatter":{"layout":"blog-post","title":"Announcing Ballerina Swan Lake Update 8 (2201.8.0)","author":"Ballerina Team","published-date":"22 September 2023","status":"Published","socialmediaimage":"Ballerina-Swan-Lake-GA-Release-banner-02-with-button.png","permalink":"/posts/2023-09-22-announcing-ballerina-2201.8.0-swan-lake-update-8/"},"content":"\n<style>.cBlogContent p{white-space: break-spaces !important;}</style>\n\nWe are excited to announce the [Ballerina Swan Lake Update 8 (2201.8.0)](https://ballerina.io/downloads/) release, which adds many new features and improvements to the language, library, runtime, and tooling of Ballerina as described below.\n\n## Java 17 support\n\nThe Java 11 Long term Support (LTS) active support will end in September 2023. Therefore, the jBallerina runtime is now upgraded to support <a href=\"https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html\" target=\"_blank\">Java 17 LTS</a>, which is the latest long-term support release of the Java SE platform.\n\nYou will not have an impact on the Java version upgrade except for the following.\n\n- If you are specifically using Java 11 to run Ballerina programs, you would have to switch to Java 17.\n\n- The Ballerina interoperability implementation will have an impact on Java 17 support due to any incompatible changes. As an example, Java 17 will have some restrictions on using Java reflections with internal Java packages.\n\n- Ballerina Update 8 Docker images will run on Java 17 JRE.\n\nFor more information, see the <a href=\"https://www.oracle.com/java/technologies/javase/17-relnote-issues.html\" target=\"_blank\">Java 17 release notes</a>.\n\n## Custom package repositories support \n\nWith the Swan Lake Update 8 release, now, you can seamlessly integrate Maven repositories into the package build. This feature empowers you to publish and retrieve packages from multiple Maven repositories in addition to the Ballerina Central repository.\n\nThe steps below show an example of how you can publish a package to Github packages and retrieve it.\n\n1. Configure the repository in the `<USER_HOME>/.ballerina/Settings.toml` file.\n\n    ```toml\n    [[repository.maven]]\n    id = \"myGitRepo\" # This id is used when pushing/ pulling balas\n    url = \"https://maven.pkg.github.com/azinneera/ballerina-release\"\n    username = \"<github_username>\"\n    accesstoken = \"<github_accesstoken>\"\n    ```\n\n2. Execute the command below to publish the package.\n\n    ```\n    $ bal push --repository myGitRepo\n    ```\n\n3. Specify the dependency in the `Ballerina.toml` file to retrieve the package.\n\n    ```toml\n    [[dependency]]\n    org = “john”\n    name = “email”\n    version = “0.1.0”\n    repository = “myGitRepo”\n    ```\n\nFor more information, see <a href=\"https://ballerina.io/learn/manage-dependencies/#use-custom-repositories-for-package-management\" target=\"_blank\">Use custom repositories for package management</a>.\n\n## The `bal tool` and `bal profile` commands\n\nThis release introduces two new commands to the collection of Ballerina CLI commands.\n\n### The `bal tool` command\n\nThe Ballerina Swan Lake distribution includes a set of bundled CLI commands for efficiently managing Ballerina source code. Additionally, Ballerina offers a collection of tools, which are CLI command implementations not bundled with the distribution but can be easily obtained from Ballerina Central and seamlessly managed using the `bal tool` command. \n\nThe `bal tool` command allows you to pull, remove, update, search tools, and switch between tool versions. Once pulled, these tools will behave as first-class commands.\n\nFor example, execute the command below to pull and install the <a href=\"https://ballerina.io/learn/health-tool/\" target=\"_blank\">Health tool</a>.\n\n```\n$ bal tool pull health\n```\n\nFor more information, see <a href=\"https://ballerina.io/learn/cli-commands/#tool-commands\" target=\"_blank\">Tool commands</a>.\n\n### The `bal profile` command\n\nThe `bal profile` command runs a Ballerina package, profiles it, and generates a flame graph, which shows the function call stack and the execution times of each function call. It provides the ability to find the performance bottlenecks of a Ballerina application. \n\nAn example flame graph generated by the Ballerina Profiler is shown below.\n\n<img src=\"/images/ballerina-service-profiler-output.png\" alt=\"Profiler Output\">\n\nFor more information, see <a href=\"https://ballerina.io/learn/ballerina-profiler\" target=\"_blank\">Ballerina Profiler</a>.\n\n## The `mqtt` and `java.jms` packages\n\nThis release brings two new additions to the Ballerina Library to improve the provision of messaging-related functionalities.\n\n### The `mqtt` package\n\nMQTT is a lightweight, publish-subscribe messaging protocol that is ideal for connecting remote devices with a small code footprint and minimal network bandwidth. It is an open standard protocol that is supported by a wide variety of devices and platforms. Ballerina MQTT supports MQTTv5 with request/response, will message, and many more features. \n\nBelow is an example usage of the `mqtt` package.\n\n```ballerina\nimport ballerina/mqtt;\n\nmqtt:ClientConfiguration clientConfiguration = {\n    connectionConfig: {\n        username: \"ballerina\",\n        password: \"ballerinamqtt\"\n    }\n};\n\nmqtt:Client mqttClient = check new (mqtt:DEFAULT_URL, \"publisher-client-1\", clientConfiguration);\ncheck mqttClient->publish(\"mqtt/test\", {payload: \"This is Ballerina MQTT client!!!\".toBytes()});\n```\n\nFor more information, see <a href=\"https://central.ballerina.io/ballerina/mqtt\" target=\"_blank\">`ballerina/mqtt`</a>.\n\n### The `java.jms` package\n\nJava Message Service (JMS) is a Java-based API that provides a standardized way for applications to create, send, receive, and consume messages in a loosely coupled, reliable, and asynchronous manner. JMS is part of the Java EE (Enterprise Edition) specification and is commonly used for building distributed, decoupled, and scalable applications that need to exchange information or events between different components. \n\nBelow is an example usage of the `java.jms` package.\n\n```ballerina\nimport ballerina/log;\nimport ballerinax/java.jms;\nimport ballerinax/activemq.driver as _;\n\njms:Connection connection = check new (\n    initialContextFactory = \"org.apache.activemq.jndi.ActiveMQInitialContextFactory\",\n    providerUrl = \"tcp://localhost:61616\"\n);\njms:Session session = checkconnection->createSession();\n\n// sending messages using JMS message producer\njms:MessageProducer producer = check session.createProducer({\n    'type: jms:QUEUE,\n    name: \"MyQueue\"\n});\njms:TextMessage msg = {\n    content: \"Hello Ballerina!\"\n};\n\ncheck producer->send(msg);\n\n    // consuming messages using JMS message consumer\n    jms:MessageConsumer consumer = check session.createConsumer(\n    destination = {\n        'type: jms:QUEUE,\n        name: \"MyQueue\"\n    }\n);\nwhile true {\n        jms: Message\n        ? response = checkconsumer->receive(3000);\nif response is jms:TextMessage     {\n        log:printInfo         (\"Message received: \"         , content =response.toString());\n    }\n}\n```\n\nFor more information, see <a href=\"https://central.ballerina.io/ballerinax/java.jms\" target=\"_blank\">`ballerinax/java.jms`</a>.\n\n## The `graphql.dataloader` submodule\n\nThe Ballerina `graphql` package provides the capability to batch and cache data fetched from data sources using the `graphql.dataloader` submodule. This DataLoader feature helps to effectively solve the N+1 problem that commonly occurs in GraphQL services.\n\nFor an example of the usage of the `graphql.dataloader` submodule, see the <a href=\"https://ballerina.io/downloads/swan-lake-release-notes/swan-lake-2201.8.0#graphql-package\" target=\"_blank\">release note</a>.\n\nFor more information, see the <a href=\"https://ballerina.io/spec/graphql/#106-dataloader\" target=\"_blank\">DataLoader specification</a>.\n\nFurthermore, this release brings a range of notable additions and improvements to the language, runtime, Ballerina library, and developer tools. For a comprehensive overview of all the new features and improvements brought by Swan Lake Update 8, see the <a href=\"https://ballerina.io/downloads/swan-lake-release-notes/swan-lake-2201.8.0\" target=\"_blank\">release note</a>.\n\nWe encourage our community to explore these features and provide feedback. Your input is invaluable in shaping the future of Ballerina and ensuring it meets your needs.\n\nCheers to the Ballerina community and the bright future of it!\n","codes":"[[-1626072100,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #ffffff\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">[[</span><span style=\\\"color: #953800\\\">repository</span><span style=\\\"color: #24292F\\\">.</span><span style=\\\"color: #953800\\\">maven</span><span style=\\\"color: #24292F\\\">]]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">id = </span><span style=\\\"color: #0A3069\\\">&quot;myGitRepo&quot;</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #6E7781\\\"># This id is used when pushing/ pulling balas</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">url = </span><span style=\\\"color: #0A3069\\\">&quot;https://maven.pkg.github.com/azinneera/ballerina-release&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">username = </span><span style=\\\"color: #0A3069\\\">&quot;&lt;github_username&gt;&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">accesstoken = </span><span style=\\\"color: #0A3069\\\">&quot;&lt;github_accesstoken&gt;&quot;</span></span></code></pre>\"],[-1476330296,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #ffffff\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">[[</span><span style=\\\"color: #953800\\\">dependency</span><span style=\\\"color: #24292F\\\">]]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">org = “</span><span style=\\\"color: #82071E; font-style: italic\\\">john”</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">name = “</span><span style=\\\"color: #82071E; font-style: italic\\\">email”</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">version = “</span><span style=\\\"color: #82071E; font-style: italic\\\">0.1.0”</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">repository = “</span><span style=\\\"color: #82071E; font-style: italic\\\">myGitRepo”</span></span></code></pre>\"],[-1211133532,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #ffffff\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">import</span><span style=\\\"color: #24292F\\\"> ballerina/mqtt;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">mqtt</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">ClientConfiguration clientConfiguration </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    connectionConfig</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        username</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;ballerina&quot;</span><span style=\\\"color: #24292F\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        password</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;ballerinamqtt&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">mqtt</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">Client mqttClient </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">check</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">new</span><span style=\\\"color: #24292F\\\"> (</span><span style=\\\"color: #953800\\\">mqtt</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">DEFAULT_URL, </span><span style=\\\"color: #0A3069\\\">&quot;publisher-client-1&quot;</span><span style=\\\"color: #24292F\\\">, </span><span style=\\\"color: #953800\\\">clientConfiguration</span><span style=\\\"color: #24292F\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">check</span><span style=\\\"color: #24292F\\\"> mqttClient</span><span style=\\\"color: #CF222E\\\">-&gt;</span><span style=\\\"color: #8250DF\\\">publish</span><span style=\\\"color: #24292F\\\">(</span><span style=\\\"color: #0A3069\\\">&quot;mqtt/test&quot;</span><span style=\\\"color: #24292F\\\">, {payload</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;This is Ballerina MQTT client!!!&quot;</span><span style=\\\"color: #24292F\\\">.</span><span style=\\\"color: #8250DF\\\">toBytes</span><span style=\\\"color: #24292F\\\">()});</span></span></code></pre>\"],[-221878718,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #ffffff\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">import</span><span style=\\\"color: #24292F\\\"> ballerina/log;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">import</span><span style=\\\"color: #24292F\\\"> ballerinax/java.jms;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">import</span><span style=\\\"color: #24292F\\\"> ballerinax/activemq.driver </span><span style=\\\"color: #CF222E\\\">as</span><span style=\\\"color: #24292F\\\"> _;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">Connection connection </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">check</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">new</span><span style=\\\"color: #24292F\\\"> (</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    </span><span style=\\\"color: #953800\\\">initialContextFactory</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;org.apache.activemq.jndi.ActiveMQInitialContextFactory&quot;</span><span style=\\\"color: #24292F\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    </span><span style=\\\"color: #953800\\\">providerUrl</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;tcp://localhost:61616&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">Session session </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> checkconnection</span><span style=\\\"color: #CF222E\\\">-&gt;</span><span style=\\\"color: #8250DF\\\">createSession</span><span style=\\\"color: #24292F\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #6E7781\\\">// sending messages using JMS message producer</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">MessageProducer producer </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">check</span><span style=\\\"color: #24292F\\\"> session.</span><span style=\\\"color: #8250DF\\\">createProducer</span><span style=\\\"color: #24292F\\\">({</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    &#39;type</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> jms:QUEUE,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    name</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;MyQueue&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">});</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">TextMessage msg </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    content</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;Hello Ballerina!&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">check</span><span style=\\\"color: #24292F\\\"> producer</span><span style=\\\"color: #CF222E\\\">-&gt;</span><span style=\\\"color: #8250DF\\\">send</span><span style=\\\"color: #24292F\\\">(</span><span style=\\\"color: #953800\\\">msg</span><span style=\\\"color: #24292F\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    </span><span style=\\\"color: #6E7781\\\">// consuming messages using JMS message consumer</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">MessageConsumer consumer </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">check</span><span style=\\\"color: #24292F\\\"> session.</span><span style=\\\"color: #8250DF\\\">createConsumer</span><span style=\\\"color: #24292F\\\">(</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    </span><span style=\\\"color: #953800\\\">destination</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        &#39;type</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> jms:QUEUE,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        name</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #0A3069\\\">&quot;MyQueue&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">while</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">true</span><span style=\\\"color: #24292F\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\"> Message</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        </span><span style=\\\"color: #CF222E\\\">?</span><span style=\\\"color: #24292F\\\"> response </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\"> checkconsumer</span><span style=\\\"color: #CF222E\\\">-&gt;</span><span style=\\\"color: #8250DF\\\">receive</span><span style=\\\"color: #24292F\\\">(</span><span style=\\\"color: #0550AE\\\">3000</span><span style=\\\"color: #24292F\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #CF222E\\\">if</span><span style=\\\"color: #24292F\\\"> response </span><span style=\\\"color: #CF222E\\\">is</span><span style=\\\"color: #24292F\\\"> jms</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #24292F\\\">TextMessage     {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">        log</span><span style=\\\"color: #CF222E\\\">:</span><span style=\\\"color: #8250DF\\\">printInfo         </span><span style=\\\"color: #24292F\\\">(</span><span style=\\\"color: #0A3069\\\">&quot;Message received: &quot;</span><span style=\\\"color: #24292F\\\">         , </span><span style=\\\"color: #953800\\\">content</span><span style=\\\"color: #24292F\\\"> </span><span style=\\\"color: #CF222E\\\">=</span><span style=\\\"color: #24292F\\\">response.</span><span style=\\\"color: #8250DF\\\">toString</span><span style=\\\"color: #24292F\\\">());</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292F\\\">}</span></span></code></pre>\"]]","slug":"2023-09-22-announcing-ballerina-2201.8.0-swan-lake-update-8"},"__N_SSG":true}